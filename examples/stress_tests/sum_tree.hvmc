@node = (a (b ((a (b c)) (* c))))
@leaf = (a (* ((a b) b)))

@add = (<+ a b> (a b))

@gen = (?<(a @genS) b> b)
  & @leaf ~ (#1 a)

@genS = ({2 a b} c)
  & @node ~ (e (d c))
  & @gen ~ (a d)
  & @gen ~ (b e)

@sum = ((@sumS (@sumZ a)) a)

@sumS = (a (b c))
  & @add ~ (d (e c))
  & @sum ~ (a d)
  & @sum ~ (b e)

@sumZ = (a a)

@main = a
  & @gen ~ (#24 b)
  & @sum ~ (b a)
